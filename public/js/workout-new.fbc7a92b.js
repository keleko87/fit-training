(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["workout-new","home~routine-new"],{"0b82":function(e,t,r){e.exports=r.p+"img/fit-boxing-logo-white.7f9b564f.png"},"1b80":function(e,t,r){"use strict";t["a"]={data:function(){return{pagination:{currentPage:1,perPage:12}}},methods:{pageItems:function(e){return e.slice((this.pagination.currentPage-1)*this.pagination.perPage,this.pagination.currentPage*this.pagination.perPage)},getTotalPages:function(e){var t=e/this.pagination.perPage,r=e%this.pagination.perPage;return 0!==r?Math.ceil(t):t},onPageChange:function(e){this.pagination.currentPage=e}}}},"23de":function(e,t,r){"use strict";var i=r("3d3c"),s=r.n(i);s.a},"3d3c":function(e,t,r){},"5d04":function(e,t,r){"use strict";var i=r("e000"),s=r.n(i);s.a},"652e":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ft-exercise"},[r("modal-poll",{attrs:{modal:e.modalPoll},on:{close:function(t){return e.onCloseModal(t)}}},[r("template",{slot:"header"},[r("h3",{staticClass:"mb-0"},[e._v("Crear ejercicio")])]),r("template",{slot:"body"},[r("exercise-new",{on:{submitStatus:function(t){return e.onCloseModal(t)}}})],1)],2),r("div",{staticClass:"ft-exercise__filters d-flex justify-content-start"},[r("div",{staticClass:"ft-exercise__filters--item mx-2"},[r("ft-filter-tags",{ref:"filterBodyPart",attrs:{placeholder:"Parte del cuerpo",value:e.bodyPart.filterValues,tagField:"bodyPart",tags:e.bodyParts,items:e.totalExercises},on:{filter:function(t){return e.filterAllIn(t)}}})],1),r("div",{staticClass:"ft-exercise__filters--item mx-2"},[r("ft-filter-tags",{ref:"filterBodyPart",attrs:{placeholder:"Actividad",value:e.sport.filterValues,tagField:"sport",tags:e.sports,items:e.totalExercises},on:{filter:function(t){return e.filterAllIn(t)}}})],1),r("div",{staticClass:"ft-exercise__filters--item mx-2"},[r("ft-search",{ref:"searchName",attrs:{"reset-value":e.resetSearchNameValue,items:e.totalExercises,placeholder:"Buscar"},on:{search:function(t){return e.filterAllIn(t)}}})],1)]),r("div",{staticClass:"container"},[r("div",{staticClass:"d-flex justify-content-between my-3 p-1"},[e._m(0),r("div",{staticClass:"ft-exercise__create"},[r("a",{staticClass:"btn btn-primary btn-sm btn-block",on:{click:function(t){e.modalPoll=!0}}},[e._v("\n          Crear ejercicio\n        ")])])]),e.itemsPage.length>0?r("div",{staticClass:"row d-flex justify-content-between"},[r("div",{staticClass:"ft-exercise__total col-md-6 m-0"},[r("p",{staticClass:"ft-exercise__total--paragraph"},[e.currentRange.first&&e.currentRange.last?r("span",[e._v("\n            "+e._s(e.currentRange.first)+" a "+e._s(e.currentRange.last)+" de\n          ")]):e.currentRange.first?r("span",[e._v("\n            "+e._s(e.currentRange.first)+" de\n          ")]):e._e(),r("span",[e._v(e._s(e.itemsCount)+" resultados")])])]),r("div",{staticClass:"ft-exercise__pagination col-md-6"},[r("ft-pagination",{staticClass:"mr-1",attrs:{"total-pages":e.totalPages,total:e.itemsCount,"current-page":e.pagination.currentPage,"per-page":e.pagination.perPage},on:{pagechanged:function(t){return e.onPageChange(t)}}})],1)]):r("div",{staticClass:"ft-exercise__not-found d-flex justify-content-center align-items-center"},[e._m(1)]),r("div",{staticClass:"row"},[e.itemsPage&&e.itemsPage.length?r("div",{staticClass:"col-12"},[r("exercise-list",{attrs:{list:e.itemsPage,type:"exercise"}})],1):e._e()])])],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("h4",[e._v("Ejercicios disponibles")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("img",{staticClass:"mx-auto",attrs:{src:r("0b82"),alt:"not found results"}}),i("h3",{staticClass:"text-center"},[e._v("No se encontraron resultados")])])}],a=r("a34a"),n=r.n(a),o=r("1b80"),l=r("9a36");function c(e){return d(e)||p(e)||h(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){if(Array.isArray(e))return v(e)}function m(e){return g(e)||p(e)||h(e)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function p(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function g(e){if(Array.isArray(e))return e}function b(e,t,r,i,s,a,n){try{var o=e[a](n),l=o.value}catch(c){return void r(c)}o.done?t(l):Promise.resolve(l).then(i,s)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(i,s){var a=e.apply(t,r);function n(e){b(a,i,s,n,o,"next",e)}function o(e){b(a,i,s,n,o,"throw",e)}n(void 0)}))}}var _=function(){return r.e("chunk-7a0118f2").then(r.bind(null,"ee12"))},y=function(){return r.e("chunk-0d20586a").then(r.bind(null,"e11e"))},$=function(){return r.e("chunk-23ad95d4").then(r.bind(null,"d529"))},w=function(){return r.e("chunk-929b22a0").then(r.bind(null,"9ebc"))},C=function(){return Promise.all([r.e("chunk-1e827a9d"),r.e("chunk-bba23c98")]).then(r.bind(null,"574e"))},P=function(){return r.e("chunk-5fd74178").then(r.bind(null,"fcd6"))},E={name:"exercise",components:{FtSearch:_,FtFilterTags:y,ExerciseList:w,ExerciseNew:C,ModalPoll:P,FtPagination:$},mounted:function(){var e=x(n.a.mark((function e(){var t;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("GET_EXERCISES");case 2:t=e.sent,this.exercisesFiltered=t;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mixins:[o["a"]],data:function(){return{exercisesFiltered:[],modalPoll:!1,sport:{filterValues:[],items:[]},bodyPart:{filterValues:[],items:[]},filterValues:[],searchNameValues:[],resetSearchNameValue:!1,sports:l["f"],bodyParts:l["a"]}},computed:{totalExercises:function(){return this.$store.state.exercise.totalExercises},itemsPage:function(){return this.pageItems(this.exercisesFiltered)},itemsCount:function(){return this.exercisesFiltered.length},totalPages:function(){return this.getTotalPages(this.itemsCount)},currentRange:function(){var e=this;return this.rangeOfItems.filter((function(t,r){return r+1===e.pagination.currentPage}))[0]},rangeOfItems:function(){for(var e=[],t=0;t<this.totalPages;t++){for(var r=[],i=0;i<this.pagination.perPage;i++){var s=this.pagination.perPage*t+1,a=s+i;if(r.push(a),a===this.itemsCount){e[t]=r;break}}e[t]=r}var n=e.map((function(e){var t=m(e),r=t[0],i=t.slice(1),s=i[i.length-1];return{first:r,last:s}}));return n}},methods:{searchExercisesByName:function(e){this.bodyPart.filterValues=[],this.resetSearchNameValue=!1,this.exercisesFiltered=e,this.pagination.currentPage=1},filterExercises:function(e){this.resetSearchNameValue=!0,this.exercisesFiltered=e,this.pagination.currentPage=1},filterAllIn:function(e){var t=this.totalExercises;if(!e.items.length)return t=[],this.exercisesFiltered=t,void(e.filterValues&&this.addFilterValues(e));void 0!==e.query&&(t=this.eventQuery(e)),e.filterValues&&(this.addFilterValues(e),t=this.filterItemsByTagField(e.tagField,t),this.searchNameValues.length&&(t=this.findFilterItems(t,this.searchNameValues))),this.exercisesFiltered=c(new Set(t)),this.pagination.currentPage=1},addFilterValues:function(e){switch(e.tagField){case"sport":this.sport.filterValues=e.filterValues,this.sport.items=e.items;break;case"bodyPart":this.bodyPart.filterValues=e.filterValues,this.bodyPart.items=e.items;break;default:break}},filterByTags:function(e,t,r){var i;if(t.filterValues.length){if(t.filterValues.length&&!t.items.length)i=[];else if(t.items.length){var s=this.findFilterItems(r,e.items);i=this.findFilterItems(s,t.items)}}else i=this.findFilterItems(r,e.items);return i},filterItemsByTagField:function(e,t){var r;switch(e){case"sport":r=this.filterByTags(this.sport,this.bodyPart,t);break;case"bodyPart":r=this.filterByTags(this.bodyPart,this.sport,t);break;default:break}return this.filterValues=r,r},eventQuery:function(e){this.searchNameValues=e.items;var t=e.items;return this.bodyPart.filterValues.length&&!this.bodyPart.items.length||this.sport.filterValues.length&&!this.sport.items.length?t=[]:this.filterValues.length&&(t=this.findFilterItems(t,this.filterValues)),t},findFilterItems:function(e,t){return e.filter((function(e){return t.find((function(t){return e._id===t._id}))}))},onCloseModal:function(e){this.modalPoll=e}}},V=E,k=(r("5d04"),r("2877")),F=Object(k["a"])(V,i,s,!1,null,"351edeac",null);t["default"]=F.exports},"9a36":function(e,t,r){"use strict";r.d(t,"f",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return a})),r.d(t,"g",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return c})),r.d(t,"i",(function(){return u})),r.d(t,"h",(function(){return d}));var i=["Fitness","Boxing","HIIT","Core"],s=["Principiante","Intermedio","Avanzado"],a=["Full body","Pectoral","Espalda","Hombro","Bíceps","Tríceps","Pierna","Abdominal"],n=["Fuerza","Volumen","Definición","Resistencia","Velocidad","Agilidad","Técnica","Potencia","Footwork"],o=["0","0.5","1","2","3","4","5","10","15","20","25","30","45","60"],l=["1","2","3","4","5"],c=/[!"·@#$%&()=?¿¡^{}\\_`\]['*+-.,/<>]/,u="https://youtu.be/",d="https://www.youtube.com/embed/"},aab6:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ft-workout-new mt-4 px-3"},[r("div",{staticClass:"container"},[r("form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("div",{staticClass:"row d-flex align-items-center"},[r("div",{staticClass:"col-11"},[r("md-field",{class:e.getValidationClass("name")},[r("label",[e._v("Nuevo Entrenamiento")]),r("md-input",{attrs:{type:"text",id:"name"},model:{value:e.$v.form.name.$model,callback:function(t){e.$set(e.$v.form.name,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.name.$model"}}),e.$v.form.name.required?e.$v.form.name.minlength?e._e():r("span",{staticClass:"md-error"},[e._v(e._s(e.invalidField))]):r("span",{staticClass:"md-error"},[e._v(e._s(e.requiredField))])],1)],1),r("div",{staticClass:"col-1 pl-0"},[r("a",{on:{click:function(t){return t.preventDefault(),e.toggleShowFields()}}},[r("mdb-icon",{staticClass:"ft-workout-new__icon",attrs:{icon:"edit",size:"2x"}})],1)])]),r("transition",{attrs:{name:"fade"}},[e.showFields?r("div",[r("div",{staticClass:"form-row"},[r("div",{staticClass:"col-lg-6"},[r("md-field",{class:e.getValidationClass("sport")},[r("label",{attrs:{for:"sport"}},[e._v("Actividad")]),r("md-select",{attrs:{id:"sport",name:"sport"},model:{value:e.$v.form.sport.$model,callback:function(t){e.$set(e.$v.form.sport,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.sport.$model"}},e._l(e.sports,(function(t){return r("md-option",{key:t,attrs:{value:t}},[e._v("\n                    "+e._s(t)+"\n                  ")])})),1),e.$v.form.sport.required?e._e():r("span",{staticClass:"md-error"},[e._v(e._s(e.requiredField))])],1)],1),r("div",{staticClass:"col-lg-6"},[r("md-field",{class:e.getValidationClass("bodyPart")},[r("label",{attrs:{for:"bodyPart"}},[e._v("Parte del cuerpo")]),r("md-select",{attrs:{id:"bodyPart",name:"bodyPart"},model:{value:e.$v.form.bodyPart.$model,callback:function(t){e.$set(e.$v.form.bodyPart,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.bodyPart.$model"}},e._l(e.bodyParts,(function(t){return r("md-option",{key:t,attrs:{value:t}},[e._v("\n                    "+e._s(t)+"\n                  ")])})),1),e.$v.form.bodyPart.required?e._e():r("span",{staticClass:"md-error"},[e._v(e._s(e.requiredField))])],1)],1)]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"col-lg-6"},[r("md-field",{class:e.getValidationClass("target")},[r("label",{attrs:{for:"movie"}},[e._v("Objetivo")]),r("md-select",{attrs:{id:"target",name:"target"},model:{value:e.$v.form.target.$model,callback:function(t){e.$set(e.$v.form.target,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.target.$model"}},e._l(e.targets,(function(t){return r("md-option",{key:t,attrs:{value:t}},[e._v("\n                    "+e._s(t))])})),1),e.$v.form.target.required?e._e():r("span",{staticClass:"md-error"},[e._v(e._s(e.requiredField))])],1)],1),r("div",{staticClass:"col-lg-6"},[r("md-field",{class:e.getValidationClass("level")},[r("label",{attrs:{for:"level"}},[e._v("Nivel")]),r("md-select",{attrs:{id:"level",name:"level"},model:{value:e.$v.form.level.$model,callback:function(t){e.$set(e.$v.form.level,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.level.$model"}},e._l(e.levels,(function(t){return r("md-option",{key:t,attrs:{value:t}},[e._v("\n                    "+e._s(t)+"\n                  ")])})),1)],1)],1)]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"col-12 col-lg-6"},[r("md-autocomplete",{class:e.getValidationClass("restBetweenExercise"),attrs:{"md-options":e.minutes},model:{value:e.$v.form.restBetweenExercise.$model,callback:function(t){e.$set(e.$v.form.restBetweenExercise,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.restBetweenExercise.$model"}},[r("label",[e._v("Descanso")])]),e.$v.form.restBetweenExercise.minValue&&e.$v.form.restBetweenExercise.maxValue?e._e():r("span",{staticClass:"md-error"},[e._v("\n                Añade un valor entre "+e._s(e.minValueTime)+" y "+e._s(e.maxValueTime)+"\n              ")])],1),r("div",{staticClass:"col-12 col-lg-6 mb-4"},[r("md-autocomplete",{class:e.getValidationClass("duration"),attrs:{"md-options":e.minutes},model:{value:e.$v.form.duration.$model,callback:function(t){e.$set(e.$v.form.duration,"$model","string"===typeof t?t.trim():t)},expression:"$v.form.duration.$model"}},[r("label",[e._v("Duración (min)")])]),e.$v.form.duration.minValue&&e.$v.form.duration.maxValue?e._e():r("span",{staticClass:"md-error"},[e._v("\n                Añade un valor entre "+e._s(e.minValueTime)+" y "+e._s(e.maxValueTime)+"\n              ")])],1)])]):e._e()]),r("div",{},[r("draggable",{staticClass:"dragArea flex-column",attrs:{group:"workout",handle:".draggable-handle"},on:{change:e.changeExercises},model:{value:e.workoutExercises,callback:function(t){e.workoutExercises=t},expression:"workoutExercises"}},e._l(e.workoutExercises,(function(t){return r("div",{key:t.idGlobal,staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-10 col-xl-7 mx-auto my-2"},[r("exercise-card-add",{attrs:{data:t},on:{delete:function(t){return e.onDeleteExercise(t)}}})],1)})),0),e.workoutExercises.length?e._e():r("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-10 col-xl-7 mx-auto my-2"},[r("div",{staticClass:"ft-workout-new__card-add",class:e.getValidationClass("exercises")},[e._m(0)])])],1),r("div",{staticClass:"form-row mt-3 text-center"},[r("div",{staticClass:"col"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("\n            Guardar\n          ")]),"OK"===e.submitStatus?r("p",{staticClass:"success"},[e._v("\n            Entrenamiento creado correctamente!\n          ")]):e._e(),"PENDING"===e.submitStatus?r("p",{staticClass:"info"},[e._v("\n            Enviando...\n          ")]):e._e()])])],1)])])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ft-workout-new__card-add--text"},[r("h5",[e._v("Arrastra aqui los ejercicios que quieras incluir")])])}],a=r("a34a"),n=r.n(a),o=r("91c9"),l=r("310e"),c=r.n(l),u=r("b5ae"),d=r("9a36");function m(e,t,r,i,s,a,n){try{var o=e[a](n),l=o.value}catch(c){return void r(c)}o.done?t(l):Promise.resolve(l).then(i,s)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(i,s){var a=e.apply(t,r);function n(e){m(a,i,s,n,o,"next",e)}function o(e){m(a,i,s,n,o,"throw",e)}n(void 0)}))}}var h=function(){return Promise.all([r.e("chunk-1e827a9d"),r.e("chunk-332cdc51"),r.e("chunk-77cfdfea")]).then(r.bind(null,"383d"))},v={name:"workout-new",components:{ExerciseCardAdd:h,draggable:c.a,mdbIcon:o["mdbIcon"]},created:function(){var e=f(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("RESET_WORKOUT_DATA");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{form:{name:"",sport:"",bodyPart:"",level:"",target:"",duration:"",restBetweenExercise:"",sportImageUrl:"",creatorWorkoutId:"",exercises:[],musicList:[]},invalidField:"Campo incorrecto",requiredField:"Campo obligatorio",submitStatus:null,sports:d["f"],targets:d["g"],levels:d["b"],bodyParts:d["a"],minutes:d["c"],minValueTime:d["c"][0],maxValueTime:d["c"][d["c"].length-1],showFields:!1}},computed:{workoutExercises:{get:function(){return this.$store.state.workout.data.exercises},set:function(e){console.log("set workoutExercises value",e)}}},methods:{toggleShowFields:function(){this.showFields=!this.showFields},changeExercises:function(e){if(window.console.log("DRAG event",e),e.added){var t=e.added.element;this.$store.commit("ADD_EXERCISE",t),this.setExerciseInForm(t)}else e.moved&&this.$store.commit("MOVE_EXERCISE",e.moved)},setSportImageURL:function(e){var t=e.toLowerCase();return"@/assets/img/sports/".concat(t,".png")},getValidationClass:function(e){var t=this.$v.form[e];return"exercises"===e?{"card-add--error":t.$invalid&&t.$dirty}:t?{"md-invalid":t.$invalid&&t.$dirty}:void 0},onDeleteExercise:function(e){this.$v.form.exercises.$model=this.workoutExercises.filter((function(t){return t.idGlobal!==e}))},setExerciseInForm:function(e){this.$v.form.exercises.$model.push(e)},resetForm:function(){this.showFields=!1,this.$v.form.$reset()},onSubmit:function(){var e=f(n.a.mark((function e(){var t,r=this;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.form.$touch(),this.showFields=!0,!this.$v.$invalid){e.next=6;break}this.submitStatus="ERROR",e.next=15;break;case 6:return this.submitStatus="PENDING",t=this.saveWorkout(),e.next=10,this.$store.dispatch("SAVE_WORKOUT",t);case 10:return this.submitStatus="OK",e.next=13,this.$store.dispatch("RESET_WORKOUT_DATA");case 13:this.resetForm(),setTimeout((function(){r.submitStatus=""}),3e3);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveWorkout:function(){var e=this.$v.form.$model,t=e.name,r=e.sport,i=e.bodyPart,s=e.level,a=e.target,n=e.duration,o=e.restBetweenExercise,l="UserId-1",c=this.setSportImageURL(r),u=this.workoutExercises,d=this.workoutExercises.length,m=[];return{name:t,sport:r,sportImageUrl:c,bodyPart:i,level:s,target:a,duration:n,restBetweenExercise:o,creatorWorkoutId:l,exercises:u,totalExercises:d,musicList:m}}},validations:function(){return{form:{name:{required:u["required"],minLength:Object(u["minLength"])(5)},sport:{required:u["required"]},bodyPart:{required:u["required"]},target:{required:u["required"]},level:{},restBetweenExercise:{required:u["required"],minValue:Object(u["minValue"])(this.minValueTime),maxValue:Object(u["maxValue"])(this.maxValueTime)},duration:{minValue:Object(u["minValue"])(this.minValueTime),maxValue:Object(u["maxValue"])(this.maxValueTime)},exercises:{required:u["required"]}}}}},p=v,g=(r("23de"),r("2877")),b=Object(g["a"])(p,i,s,!1,null,"831156aa",null);t["default"]=b.exports},e000:function(e,t,r){}}]);